<!-- Modal de Eliminación -->
<div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <!-- Header -->
      <div class="modal-header modal-header-danger">
        <h5 class="modal-title">
          <i class="ph ph-warning-circle me-2"></i>
          Confirmar Eliminación
        </h5>
        <button
          type="button"
          class="btn-close"
          (click)="onCancelar()"
          [disabled]="loading"
        ></button>
      </div>
      
      <!-- Body -->
      <div class="modal-body">
        <!-- Advertencia principal -->
        <div class="alert alert-danger d-flex align-items-start" role="alert">
          <i class="ph ph-warning-circle me-3 mt-1"></i>
          <div>
            <h6 class="alert-heading mb-2">¡Atención!</h6>
            <p class="mb-0">
              Estás a punto de eliminar permanentemente esta recompensa. Esta acción no se puede deshacer.
            </p>
          </div>
        </div>
        
        <!-- Información de la recompensa -->
        <div *ngIf="recompensa" class="recompensa-info">
          <h6 class="section-title">
            <i class="ph ph-info me-2"></i>
            Información de la Recompensa
          </h6>
          
          <div class="info-card">
            <div class="info-header">
              <div class="info-icon">
                <i [class]="'ph ' + getTipoIcon(recompensa.tipo)"></i>
              </div>
              <div class="info-content">
                <h6 class="info-title">{{ recompensa.nombre }}</h6>
                <p class="info-type">{{ recompensa.tipo_nombre }}</p>
              </div>
              <div class="info-status">
                <span [class]="'badge ' + getEstadoBadgeClass(recompensa.activo, recompensa.es_vigente)">
                  {{ getEstadoText(recompensa.activo, recompensa.es_vigente) }}
                </span>
              </div>
            </div>
            
            <div *ngIf="recompensa.descripcion" class="info-description">
              {{ recompensa.descripcion }}
            </div>
            
            <div class="info-details">
              <div class="row">
                <div class="col-md-6">
                  <div class="detail-item">
                    <span class="detail-label">Fecha de Inicio:</span>
                    <span class="detail-value">{{ recompensa.fecha_inicio | date:'dd/MM/yyyy' }}</span>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="detail-item">
                    <span class="detail-label">Fecha de Fin:</span>
                    <span class="detail-value">{{ recompensa.fecha_fin | date:'dd/MM/yyyy' }}</span>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="detail-item">
                    <span class="detail-label">Total de Aplicaciones:</span>
                    <span class="detail-value">{{ recompensa.total_aplicaciones | number }}</span>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="detail-item">
                    <span class="detail-label">Creado por:</span>
                    <span class="detail-value">{{ recompensa.creador.name }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Impacto de la eliminación -->
        <div class="impacto-section">
          <h6 class="section-title">
            <i class="ph ph-users me-2"></i>
            Impacto de la Eliminación
          </h6>
          
          <div [class]="'alert ' + getImpactoClass().replace('text-', 'alert-')">
            <i class="ph ph-info me-2"></i>
            {{ getImpactoText() }}
          </div>
          
          <!-- Configuraciones existentes -->
          <div class="configuraciones-info">
            <h6 class="mb-12">Configuraciones Existentes:</h6>
            <div class="config-badges">
              <span *ngIf="recompensa?.tiene_clientes" class="badge bg-info me-2 mb-2">
                <i class="ph ph-users me-1"></i>
                Segmentos de Clientes
              </span>
              <span *ngIf="recompensa?.tiene_productos" class="badge bg-warning me-2 mb-2">
                <i class="ph ph-package me-1"></i>
                Productos/Categorías
              </span>
              <span *ngIf="recompensa?.tiene_configuracion" class="badge bg-success me-2 mb-2">
                <i class="ph ph-gear me-1"></i>
                Configuración Específica
              </span>
            </div>
            <p class="text-muted small mt-12">
              <i class="ph ph-warning me-1"></i>
              Todas las configuraciones asociadas también serán eliminadas.
            </p>
          </div>
        </div>
        
        <!-- Confirmación de texto -->
        <div class="confirmacion-section">
          <h6 class="section-title">
            <i class="ph ph-shield-check me-2"></i>
            Confirmación Requerida
          </h6>
          
          <div class="confirmacion-card">
            <p class="mb-16">
              Para confirmar la eliminación, escribe <strong>{{ textoConfirmacion }}</strong> en el campo de abajo:
            </p>
            
            <div class="input-group">
              <input
                type="text"
                class="form-control"
                [(ngModel)]="confirmacionTexto"
                placeholder="Escribe ELIMINAR para confirmar"
                [disabled]="loading"
                autocomplete="off"
              />
              <span class="input-group-text">
                <i [class]="'ph ' + (canConfirm() ? 'ph-check text-success' : 'ph-x text-danger')"></i>
              </span>
            </div>
            
            <div class="form-text">
              <i class="ph ph-info me-1"></i>
              Esta medida de seguridad previene eliminaciones accidentales.
            </div>
          </div>
        </div>
      </div>
      
      <!-- Footer -->
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="onCancelar()"
          [disabled]="loading"
        >
          <i class="ph ph-x me-2"></i>
          Cancelar
        </button>
        <button
          type="button"
          class="btn btn-danger"
          (click)="onConfirmar()"
          [disabled]="loading || !canConfirm()"
        >
          <i *ngIf="!loading" class="ph ph-trash me-2"></i>
          <span *ngIf="loading" class="spinner-border spinner-border-sm me-2" role="status"></span>
          {{ loading ? 'Eliminando...' : 'Eliminar Recompensa' }}
        </button>
      </div>
    </div>
  </div>
</div>
