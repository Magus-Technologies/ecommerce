<!-- src\app\layouts\main-layouts\header\header.component.html -->
<!--==================== Preloader Start ====================-->
<!-- <div class="preloader">
    <img src="assets/images/icon/preloader.gif" alt="">
  </div> -->
<!--==================== Preloader End ====================-->

<!--==================== Overlay Start ====================-->
<div class="overlay"></div>
<!--==================== Overlay End ====================-->

<!--==================== Sidebar Overlay End ====================-->
<div
  class="side-overlay"
  [ngClass]="{ show: isMobileMenuActive }"
  (click)="closeMobileMenu()"
></div>
<!--==================== Sidebar Overlay End ====================-->

<!-- ==================== Scroll to Top End Here ==================== -->
<div
  class="progress-wrap"
  [class.active-progress]="isActiveProgress"
  (click)="scrollToTop($event)"
>
  <svg
    class="progress-circle svg-content"
    width="100%"
    height="100%"
    viewBox="-1 -1 102 102"
  >
    <path #progressPath d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
  </svg>
</div>
<!-- ==================== Scroll to Top End Here ==================== -->

<!-- ==================== Cuadro de búsqueda Comience aquí==================== -->
<form action="#" class="search-box">
  <button
    type="button"
    class="search-box__close position-absolute inset-block-start-0 inset-inline-end-0 m-16 w-48 h-48 border border-gray-100 rounded-circle flex-center text-white hover-text-gray-800 hover-bg-white text-2xl transition-1"
  >
    <i class="ph ph-x"></i>
  </button>
  <div class="container">
    <div class="position-relative">
      <input
        type="text"
        class="form-control py-16 px-24 text-xl rounded-pill pe-64"
        placeholder="Search for a product or brand"
      />
      <button
        type="submit"
        class="w-48 h-48 bg-main-600 rounded-circle flex-center text-xl text-white position-absolute top-50 translate-middle-y inset-inline-end-0 me-8"
      >
        <i class="ph ph-magnifying-glass"></i>
      </button>
    </div>
  </div>
</form>
<!-- ==================== Search Box End Here ==================== -->

<!-- ==================== Mobile Menu Start Here ==================== -->
<div
  class="mobile-menu scroll-sm d-lg-none d-block"
  [ngClass]="{ active: isMobileMenuActive }"
>
  <button type="button" class="close-button" (click)="closeMobileMenu()">
    <i class="ph ph-x"></i>
  </button>
  <div class="mobile-menu__inner">
    <a [routerLink]="['/']" class="mobile-menu__logo">
      <img src="assets/images/logo/logo3.png" alt="Logo" />
    </a>
    <div class="mobile-menu__menu">
      <!-- Nav Menu Start -->
      <ul class="nav-menu flex-align nav-menu--mobile">
        <li
          class="on-hover-item nav-menu__item has-submenu"
          routerLinkActive="activePage"
          (click)="toggleSubmenu('home')"
        >
          <a href="javascript:void(0)" class="nav-menu__link text-gray-700"
            >INICIO</a
          >
          <ul
            class="on-hover-dropdown common-dropdown nav-submenu scroll-sm"
            [style.display]="activeIndex === 'home' ? 'block' : 'none'"
          >
            <li
              class="common-dropdown__item nav-submenu__item"
              routerLinkActive="activePage"
            >
              <a
                [routerLink]="['/ofertas']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Ofertas
              </a>
            </li>
            <li
              class="common-dropdown__item nav-submenu__item"
              routerLinkActive="activePage"
            >
              <a
                [routerLink]="['/remates']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Remates
              </a>
            </li>
            <!-- <li
              class="common-dropdown__item nav-submenu__item"
              routerLinkActive="activePage"
            >
              <a
                [routerLink]="['/index-three']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Home Fashion
              </a>
            </li> -->
          </ul>
        </li>

        <li
          class="on-hover-item nav-menu__item has-submenu"
          routerLinkActive="activePage"
          (click)="toggleSubmenu('shop')"
        >
          <a href="javascript:void(0)" class="nav-menu__link text-gray-70"
            >Computadoras</a
          >
          <ul
            class="on-hover-dropdown common-dropdown nav-submenu scroll-sm"
            [style.display]="activeIndex === 'shop' ? 'block' : 'none'"
          >
            <li
              class="common-dropdown__item nav-submenu__item"
              routerLinkActive="activePage"
            >
              <a
                [routerLink]="['/shop']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Shop
              </a>
            </li>
            <li
              class="common-dropdown__item nav-submenu__item"
              routerLinkActive="activePage"
            >
              <a
                [routerLink]="['/product-details']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Shop Details
              </a>
            </li>
            <li
              class="common-dropdown__item nav-submenu__item"
              routerLinkActive="activePage"
            >
              <a
                [routerLink]="['/product-details-two']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Shop Details Two
              </a>
            </li>
          </ul>
        </li>

        <!-- Pages Dropdown -->
        <li
          class="on-hover-item nav-menu__item has-submenu"
          [routerLinkActive]="'activePage'"
          (click)="toggleSubmenu('pages')"
          [routerLinkActiveOptions]="{ exact: true }"
        >
          <span
            class="badge-notification bg-danger-20 text-white text-sm py-2 px-5 rounded-4"
            >Nuevo</span
          >
          <a href="javascript:void(0)" class="nav-menu__link text-main-600"
            >Laptos</a
          >
          <ul
            class="on-hover-dropdown common-dropdown nav-submenu scroll-sm"
            [style.display]="activeIndex === 'pages' ? 'block' : 'none'"
          >
            <li
              class="common-dropdown__item nav-submenu__item"
              [routerLinkActive]="'activePage'"
              [routerLinkActiveOptions]="{ exact: true }"
            >
              <a
                [routerLink]="['/cart']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Carrito
              </a>
            </li>

            <li
              class="common-dropdown__item nav-submenu__item"
              [routerLinkActive]="'activePage'"
              [routerLinkActiveOptions]="{ exact: true }"
            >
              <a
                [routerLink]="['/wishlist']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Lista de deseos
              </a>
            </li>

            <li
              class="common-dropdown__item nav-submenu__item"
              [routerLinkActive]="'activePage'"
              [routerLinkActiveOptions]="{ exact: true }"
            >
              <a
                [routerLink]="['/checkout']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Pagar
              </a>
            </li>

            <li
              class="common-dropdown__item nav-submenu__item"
              [routerLinkActive]="'activePage'"
              [routerLinkActiveOptions]="{ exact: true }"
            >
              <a
                [routerLink]="['/become-seller']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Convertirse en vendedor
              </a>
            </li>

            <li
              class="common-dropdown__item nav-submenu__item"
              [routerLinkActive]="'activePage'"
              [routerLinkActiveOptions]="{ exact: true }"
            >
              <a
                [routerLink]="['/account']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Cuenta
              </a>
            </li>
          </ul>
        </li>
        <li
          class="on-hover-item nav-menu__item has-submenu"
          (click)="toggleSubmenu('vendor')"
        >
          <span
            class="badge-notification bg-tertiary-600 text-white text-sm py-2 px-8 rounded-4"
            >New</span
          >
          <a href="javascript:void(0)" class="nav-menu__link text-white"
            >Vendors</a
          >
          <ul
            class="on-hover-dropdown common-dropdown nav-submenu scroll-sm"
            [style.display]="activeIndex === 'vendor' ? 'block' : 'none'"
          >
            <li
              class="common-dropdown__item nav-submenu__item"
              [routerLinkActive]="'activePage'"
            >
              <a
                [routerLink]="['vendor']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Vendors
              </a>
            </li>
            <li
              class="common-dropdown__item nav-submenu__item"
              [routerLinkActive]="'activePage'"
            >
              <a
                [routerLink]="['vendor-details']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Vendor Details
              </a>
            </li>
            <li
              class="common-dropdown__item nav-submenu__item"
              [routerLinkActive]="'activePage'"
            >
              <a
                [routerLink]="['vendor-two']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Vendors Two</a
              >
            </li>
            <li
              class="common-dropdown__item nav-submenu__item"
              [routerLinkActive]="'activePage'"
            >
              <a
                [routerLink]="['vendor-two-details']"
                class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
              >
                Vendors Two Details</a
              >
            </li>
          </ul>
        </li>
        <!-- Delivery -->
        <li class="nav-menu__item" [routerLinkActive]="'activePage'">
          <a [routerLink]="['delivery']" class="nav-menu__link text-gray-700"
            >Delivery</a
          >
        </li>
        <!-- contactanos -->
        <li class="nav-menu__item" [routerLinkActive]="'activePage'">
          <a [routerLink]="['contact']" class="nav-menu__link text-gray-700"
            >Contactanos</a
          >
        </li>
      </ul>
      <!-- Nav Menu End -->
    </div>
  </div>
</div>
<!-- ==================== Mobile Menu End Here ==================== -->

<!-- ======================= Inicio del encabezado medio ========================= -->
<header class="header-middle border-bottom border-gray-100 bg-azul-oscuro">
  <div class="container container-lg">
    <nav class="header-inner flex-between gap-8">
      <!-- Logo Start -->
      <div class="logo">
        <a [routerLink]="['']" class="link">
          <img src="assets/images/logo/logo3.png" alt="Logo" />
        </a>
      </div>
      <!-- Logo End  -->

      <!-- form location Start -->
      <form
        action="#"
        class="flex-align flex-wrap form-location-wrapper max-w-840 w-100"
      >
        <div
          class="search-category select-style-one d-flex select-border-end-0 search-form d-sm-flex d-none text-heading-two text-sm w-100"
        >
          <!-- Select2 Category Dropdown -->
          <ng-container *ngIf="isBrowser">
            <ng-select2
              class="js-example-basic-single border border-neutral-40 border-end-0 bg-white"
              [data]="categories"
              [(ngModel)]="selectedCategory"
              name="category"
              placeholder="Todas las categorias"
              (ngModelChange)="onCategoryChange()"
            >
            </ng-select2>
          </ng-container>

          <!-- ✅ NUEVO: Search Input con autocompletado -->
          <div
            class="search-form__wrapper position-relative flex-grow-1 bg-white"
          >
            <input
              type="text"
              name="searchTerm"
              class="common-input py-18 ps-16 pe-76 pe-44 placeholder-italic placeholder-text-sm"
              placeholder="Buscar productos, categorías o marcas..."
              [(ngModel)]="searchTerm"
              (input)="onSearchTermChange()"
              (keydown)="onSearchKeyPress($event)"
              autocomplete="off"
            />

            <!-- ✅ NUEVO: Dropdown de sugerencias -->
            <div
              *ngIf="showSuggestions"
              class="search-suggestions position-absolute w-100"
              style="top: 100%; left: 0; max-height: 400px; overflow-y: auto"
            >
              <!-- Loading state -->
              <div
                *ngIf="isLoadingSuggestions"
                class="p-3 text-center text-gray-500"
              >
                <i class="ph ph-spinner ph-spin me-2"></i>
                Buscando...
              </div>

              <!-- Sugerencias -->
              <div
                *ngFor="let producto of searchSuggestions; let i = index"
                class="search-suggestion-item d-flex align-items-center p-3 border-bottom border-gray-100 cursor-pointer"
                [class.bg-gray-100]="i === selectedSuggestionIndex"
                (click)="selectSuggestion(producto)"
                (mouseenter)="selectedSuggestionIndex = i"
              >
                <!-- Imagen del producto -->
                <div class="suggestion-image me-3 flex-shrink-0">
                  <img
                    [src]="
                      producto.imagen_url ||
                      '/assets/images/placeholder-product.jpg'
                    "
                    [alt]="producto.nombre"
                    class="w-12 h-12 object-cover rounded"
                    style="width: 48px; height: 48px"
                  />
                </div>

                <!-- Información del producto -->
                <div class="suggestion-content flex-grow-1">
                  <div class="suggestion-title fw-medium text-dark">
                    {{ producto.nombre }}
                  </div>
                  <div class="suggestion-category text-muted small">
                    {{ producto.categoria }}
                  </div>
                </div>

                <!-- Precio -->
                <div class="suggestion-price text-success fw-bold me-2">
                  ${{ producto.precio | number : "1.2-2" }}
                </div>

                <!-- Icono -->
                <div class="suggestion-icon text-gray-400">
                  <i class="ph ph-arrow-up-right"></i>
                </div>
              </div>

              <!-- Sin resultados -->
              <div
                *ngIf="!isLoadingSuggestions && searchSuggestions.length === 0"
                class="p-3 text-center text-gray-500"
              >
                <i class="ph ph-magnifying-glass me-2"></i>
                No se encontraron productos
              </div>
            </div>

            <!-- Search Button -->
            <button
              type="button"
              (click)="onSearch()"
              class="w-64 h-44 bg-danger-10 hover-bg-danger-20 flex-center text-xl text-white position-absolute top-50 translate-middle-y inset-inline-end-0 me-6 rounded-12"
            >
              <i class="ph ph-magnifying-glass"></i>
            </button>
          </div>
        </div>
      </form>
      <!-- form location end -->

      <!-- Header Middle Right start -->
      <div class="header-right flex-align flex-shrink-0">
        <div class="flex-align gap-20">
          <button
            type="button"
            class="search-icon flex-align d-lg-none d-flex gap-4 item-hover"
          >
            <span
              class="text-2xl d-flex position-relative item-hover__text text-white"
            >
              <i class="ph ph-magnifying-glass"></i>
            </span>
          </button>

          <!-- Usuario Profile Component - Sin texto adicional -->
          <app-user-profile></app-user-profile>

          <a
            [routerLink]="['wishlist']"
            class="flex-align gap-4 item-hover-white"
          >
            <span
              class="text-xl d-flex position-relative me-6 mt-6 item-hover__text text-white"
            >
              <i class="ph ph-heart"></i>
              <span
                class="w-16 h-16 flex-center rounded-circle bg-danger-10 text-white text-xs position-absolute top-n6 end-n4"
                >0</span
              >
            </span>
            <span class="text-md item-hover__text d-none d-lg-flex text-white"
              >Lista de deseos</span
            >
          </a>

          <a [routerLink]="['cart']" class="flex-align gap-4 item-hover-white">
            <span
              class="text-xl d-flex position-relative me-6 mt-6 item-hover__text text-white"
            >
              <i class="ph ph-shopping-cart-simple"></i>
              <span
                class="w-16 h-16 flex-center rounded-circle bg-danger-10 text-white text-xs position-absolute top-n6 end-n4"
                >{{ cartItemCount }}</span
              >
            </span>
            <span class="text-md item-hover__text d-none d-lg-flex text-white"
              >Carrito</span
            >
          </a>
        </div>
      </div>
      <!-- Header Middle Right End  -->
    </nav>
  </div>
</header>
<!-- ======================= Middle Header End ========================= -->

<!-- ==================== Header Start Here ==================== -->
<header class="header bg-white border-bottom-0 box-shadow-3xl py-10 z-2">
  <div class="container container-lg">
    <nav class="header-inner d-flex justify-content-between gap-8">
      <div class="flex-align menu-category-wrapper position-relative">
        <!-- Category Dropdown Start -->
        <div class="position-relative category-dropdown-wrapper">
          <!-- Botón Explorar categorías (solo cuando NO esté en index-two) -->
          <button
            *ngIf="!isIndexTwoPage"
            type="button"
            (click)="toggleCategoryDropdown()"
            class="category-button d-flex align-items-center gap-12 text-white bg-success-600 px-20 py-16 rounded-6 hover-bg-success-700 transition-2"
          >
            <span class="text-xl line-height-1"
              ><i class="ph ph-squares-four"></i
            ></span>
            <span>Explorar categorías</span>
            <span class="line-height-1 icon transition-2"
              ><i class="ph-bold ph-caret-down"></i
            ></span>
          </button>

       <!-- ✅ NUEVO: Enlace "Arma tu PC" (solo cuando esté en index-two) -->
<a
  *ngIf="isIndexTwoPage"
  (click)="activarModoArmadoPC()"
  class="text-main-600 hover-text-main-700 text-decoration-none fw-semibold d-flex align-items-center gap-8"
  style="cursor: pointer"
>
  <span class="text-lg line-height-1"
    ><i class="ph ph-desktop"></i
  ></span>
  <span>Arma tu PC</span>
</a>

          <!-- Dropdown -->
          <div
            *ngIf="categoryDropdownVisible"
            [ngClass]="{ active: isActive }"
            class="category-dropdown border border-success-200 shadow bg-white p-16 rounded-16 w-100 max-w-472 position-absolute inset-block-start-100 inset-inline-start-0 z-99 transition-2"
          >
            <div
              class="d-grid grid-cols-3-repeat gap-4 max-h-350 overflow-y-auto"
            >
              <!-- Loading state -->
              <div
                *ngIf="isLoadingCategorias"
                class="col-span-3 text-center py-20"
              >
                <div class="spinner-border text-success-600" role="status">
                  <span class="visually-hidden">Cargando categorías...</span>
                </div>
              </div>

              <!-- Categorías dinámicas -->
              <a
                *ngFor="let category of categorie"
                [routerLink]="[category.route]"
                [queryParams]="{ categoria: category.id }"
                class="py-16 px-8 rounded-8 hover-bg-main-50 d-flex flex-column align-items-center text-center border border-white hover-border-main-100"
              >
                <img
                  [src]="category.icon"
                  [alt]="category.name"
                  class="w-40"
                  (error)="onImageError($event)"
                />
                <span class="fw-semibold text-heading mt-16 text-sm">{{
                  category.name
                }}</span>
              </a>

              <!-- Estado vacío -->
              <div
                *ngIf="!isLoadingCategorias && categorie.length === 0"
                class="col-span-3 text-center py-20"
              >
                <p class="text-gray-500">No hay categorías disponibles</p>
              </div>
            </div>
          </div>
        </div>
        <!-- Category Dropdown End -->

        <!-- Menu Start  -->
        <div class="header-menu d-lg-block d-none">
          <!-- Nav Menu Start -->
          <ul class="nav-menu flex-align">
            <li
              class="on-hover-item nav-menu__item has-submenu activePage"
              [class.activePage]="
                isParentActive(['/', '/index-two', '/index-three'])
              "
            >
              <a href="javascript:void(0)" class="nav-menu__link text-gray-700"
                >Hogar</a
              >
              <ul
                class="on-hover-dropdown common-dropdown nav-submenu scroll-sm"
              >
                <li
                  class="common-dropdown__item nav-submenu__item"
                  [class.activePage]="isRouteActive('/index-two')"
                >
                  <a
                    [routerLink]="['index-two']"
                    class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
                  >
                    Ofertas</a
                  >
                </li>
                <li
                  class="common-dropdown__item nav-submenu__item"
                  [class.activePage]="isRouteActive('/index-three')"
                >
                  <a
                    [routerLink]="['index-three']"
                    class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
                  >
                    Remates</a
                  >
                </li>
              </ul>
            </li>
            <li
              class="nav-menu__item"
              [class.activePage]="isRouteActive('/index-two')"
            >
              <a routerLink="/index-two" class="nav-menu__link text-gray-700"
                >Computadoras</a
              >
            </li>
            <li
              class="nav-menu__item"
              [class.activePage]="isRouteActive('/index-laptop')"
            >
              <a routerLink="/index-laptop" class="nav-menu__link text-gray-700"
                >laptos</a
              >
            </li>
            <li
              class="on-hover-item nav-menu__item has-submenu"
              [class.activePage]="
                isParentActive([
                  '/shop',
                  '/product-details',
                  '/product-details-two'
                ])
              "
            >
              <a href="javascript:void(0)" class="nav-menu__link text-gray-700"
                >Tienda</a
              >
              <ul
                class="on-hover-dropdown common-dropdown nav-submenu scroll-sm"
              >
                <li
                  class="common-dropdown__item nav-submenu__item"
                  [class.activePage]="isRouteActive('/shop')"
                >
                  <a
                    [routerLink]="['shop']"
                    class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
                  >
                    Tienda</a
                  >
                </li>
                <li
                  class="common-dropdown__item nav-submenu__item"
                  [class.activePage]="isRouteActive('/product-details')"
                >
                  <a
                    [routerLink]="['product-details']"
                    class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
                  >
                    Detalles del Producto</a
                  >
                </li>
                <li
                  class="common-dropdown__item nav-submenu__item"
                  [class.activePage]="isRouteActive('/product-details-two')"
                >
                  <a
                    [routerLink]="['product-details-two']"
                    class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
                  >
                    Detalles del Producto 2</a
                  >
                </li>
              </ul>
            </li>

            <li
              class="on-hover-item nav-menu__item has-submenu"
              [class.activePage]="isParentActive(['/blog', '/blog-details'])"
            >
              <a href="javascript:void(0)" class="nav-menu__link text-gray-700">
                Blog
              </a>
              <ul
                class="on-hover-dropdown common-dropdown nav-submenu scroll-sm"
              >
                <li
                  class="common-dropdown__item nav-submenu__item"
                  [class.activePage]="isRouteActive('/blog')"
                >
                  <a
                    [routerLink]="['blog']"
                    class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
                  >
                    Blog
                  </a>
                </li>
                <li
                  class="common-dropdown__item nav-submenu__item"
                  [class.activePage]="isRouteActive('/blog-details')"
                >
                  <a
                    [routerLink]="['blog-details']"
                    class="common-dropdown__link nav-submenu__link text-heading-two hover-bg-neutral-100"
                  >
                    Blog Detalles
                  </a>
                </li>
              </ul>
            </li>

            <li
              class="nav-menu__item"
              [class.activePage]="isRouteActive('/contact')"
            >
              <a routerLink="/contact" class="nav-menu__link text-gray-700"
                >Contáctanos</a
              >
            </li>
          </ul>
          <!-- Nav Menu End -->
        </div>
        <!-- Menu End  -->
      </div>

      <!-- Header Right start -->
      <div class="header-right flex-align gap-20">
        <a
          href="tel:+(2)871382023"
          class="d-sm-flex align-items-center gap-16 d-none"
        >
          <span class="d-flex text-32">
            <img src="assets/images/icon/mobile.png" alt="Mobile Icon" />
          </span>
          <span class="">
            <span class="d-block text-heading fw-medium"
              >¿Necesitas ayuda? ¡Llámanos!</span
            >
            <span
              class="d-block fw-bold text-danger-10 hover-text-decoration-underline"
              >{{ empresaInfo?.telefono || "+ 999 999 999" }}</span
            >
          </span>
        </a>
        <button
          type="button"
          class="toggle-mobileMenu d-lg-none ms-3n text-gray-800 text-4xl d-flex"
          (click)="openMobileMenu()"
        >
          <i class="ph ph-list"></i>
        </button>
      </div>
      <!-- Header Right End  -->
    </nav>
  </div>
</header>
